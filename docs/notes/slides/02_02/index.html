<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>02_02
          --
          Building Queries</title>
      <link rel="stylesheet" href="../../../css/twemoji-amazing.css"/>
    <link rel="stylesheet" href="../../../css/bootstrap-rayveal.css"/>
    <link rel="stylesheet" href="../../../css/fontawesome.css"/>
    <link rel="stylesheet" href="../../../css/twemoji-amazing.css"/>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,900&family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+Pro:wght@200;300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/styles/default.min.css">
    <link rel="stylesheet" href="../../../css/syntax/nord.css"/>
    <link rel="stylesheet" href="../../../css/notes_override.css"/>
    <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
  </head>
  <body class="bg-subdued">
    <div class="post post-sidebar container-fluid">
      <div class="row justify-content-md-center">
        <aside class="aside aside-main col col-md-3 col-lg-2 gx-0">
            <nav class="sticky-top fw-medium lh-sm pt-2 ">
              <h3 class="text-secondary">All Docs</h3>
                  <div class="d-flex justify-content-end align-items-right border-bottom p-2  bg-primary ">
                    <a class="text-decoration-none  fw-bolder link-light  link-primary" href="../../../notes/slides/02_02/index.html">
                      <i class="fas fa-file-alt mr-2 lh-1  text-light "></i>02_02
                      Building Queries</a>
                    <a class=" link-light  flex-fill ml-3 text-right" href="../../../?d=02_02&#">
                      <i class="fab fa-slideshare"></i>
                    </a>
                  </div>
                
                  <div class="d-flex justify-content-end align-items-right border-bottom p-2 ">
                    <a class="text-decoration-none  link-secondary  link-primary" href="../../../notes/slides/02_03/index.html">
                      <i class="fas fa-file-alt mr-2 lh-1  text-primary "></i>02_03
                      Authorizing with GraphQL</a>
                    <a class=" link-secondary  flex-fill ml-3 text-right" href="../../../?d=02_03&#">
                      <i class="fab fa-slideshare"></i>
                    </a>
                  </div>
                
                  <div class="d-flex justify-content-end align-items-right border-bottom p-2 ">
                    <a class="text-decoration-none  link-secondary  link-primary" href="../../../notes/slides/99_01/index.html">
                      <i class="fas fa-file-alt mr-2 lh-1  text-primary "></i>99_01
                      Next Steps</a>
                    <a class=" link-secondary  flex-fill ml-3 text-right" href="../../../?d=99_01&#">
                      <i class="fab fa-slideshare"></i>
                    </a>
                  </div>
                
                  <div class="d-flex justify-content-end align-items-right border-bottom p-2 ">
                    <a class="text-decoration-none  link-secondary  link-primary" href="../../../notes/slides/index/index.html">
                      <i class="fas fa-file-alt mr-2 lh-1  text-primary "></i>index
                      NYU</a>
                    <a class=" link-secondary  flex-fill ml-3 text-right" href="../../../?d=index&#">
                      <i class="fab fa-slideshare"></i>
                    </a>
                  </div>
                </nav>
          </aside>

        <main class="main col col-md-6 col-lg-8">
          <!-- .slide: data-state="layout-title" class="bg-dark"-->
<h1 id="building-queries">Building Queries <a class="direct-link" href="#building-queries"> </a></h1>
<div class="slide-link"><a href="https://go.raybo.org/2sfE"><i class="fab fa-slideshare"></i> go.raybo.org/2sfE</a></div>
<blockquote>
<blockquote></blockquote>
</blockquote>
<hr>
<h1 id="graphql-queries">GraphQL Queries <a class="direct-link" href="#graphql-queries"> </a></h1>
<ul>
<li>Schema</li>
<li>Fields</li>
<li>Types</li>
</ul>
<blockquote>
<blockquote></blockquote>
</blockquote>
<p>Let's talk about the structure of a the GraphQL query we just ran.</p>
<p>The structure of all your data is known as the <code>schema</code></p>
<p>Searches are done by using looking through different <code>fields</code> and sub-fields. So, in our example, query is a field we're looking for.</p>
<p>The fields can be of different types. You're probably familiar with some traditional types like strings, integers and booleans, but each GraphQL instance also has it's own custom types.</p>
<hr>
<h1 id="graphql-requests">GraphQL Requests <a class="direct-link" href="#graphql-requests"> </a></h1>
<ul>
<li>Queries</li>
<li>Mutations</li>
</ul>
<blockquote>
<blockquote></blockquote>
</blockquote>
<p>In the Github GraphQL API, there are two root types you can use.</p>
<p>The first is <code>queries</code>. This is a simple request for information from the server. The query type has a number of sub-fields you can request. In our example, we asked for the viewer, but you can also ask for information about organizations,  repos or users.</p>
<p>The second is a mutation. This creates a request to modify data on the Github servers.</p>
<hr>
<h1 id="adding-other-fields">Adding other Fields <a class="direct-link" href="#adding-other-fields"> </a></h1>
<pre><code class="language-graphql">{
  viewer {
    login
    name
    bio
    company
    avatarUrl
  }
}

</code></pre>
<blockquote>
<blockquote></blockquote>
</blockquote>
<p>You can request more than one field, so let's add <code>name</code>, <code>bio</code>, <code>company</code> and <code>avatarUrl</code></p>
<p>In the explorer, there are pop-up hints that appear as you type in the editor. It will show up if you type a letter, or you can use <code>ctrl-m</code> to make he hints appear at any time.</p>
<p>Notes: It doesn't matter what order things are in, by the way and you can add a comment using a pound sign.</p>
<hr>
<h2 id="arguments">Arguments <a class="direct-link" href="#arguments"> </a></h2>
<pre><code>{
  license(key: &quot;MIT&quot;) {
    name
    description
    body
    url
  }
}
</code></pre>
<blockquote>
<blockquote></blockquote>
</blockquote>
<p>You can pass arguments to repositories, so let's say I wanted information about a specific license you can use in repos.</p>
<p>Let's use the docs to read how we would do this. Click on the Query field and scroll down to the license field. Note that it expects an argument called key and then a string. Now click on the license type to see details.</p>
<p>Notice that it expects a <a href="https://spdx.org/licenses/">SPDX ID</a>, which are shortnames for all of the difference licenses.</p>
<p>Because it has an <code>!</code> mark, I know that this is a required field. And notice that afterwards it explains that this item returns a License.</p>
<p>I happen to know that the SPXID for the MIT license is just the word <code>MIT</code>, so let's try sending that.</p>
<p>This type will also want to know which fields we want to ask for. If you click on the license type, you'll see that there are lots of other things we can ask for like the name, description,body, etc.</p>
<p>Now take a peek at the explorer and you'll notice that you can also choose things from there, or see the structure of the fields. Somtimes it helps to see then in that outline format.</p>
<hr>
<h1 id="nodes">Nodes <a class="direct-link" href="#nodes"> </a></h1>
<pre><code>{
  viewer {
    repositories(first: 2) {
      totalCount
      nodes {
        name
        description
        id
      }
    }
  }
}
</code></pre>
<blockquote>
<blockquote></blockquote>
</blockquote>
<p>Nodes give you access to a list of elements. For example here, we can retrieve a list of repository information.</p>
<p>They do require an argument that at least describes how many results. There is a limit of a 100 results, so keep that in mind.</p>
<hr>
<h1 id="qualifying-results">Qualifying Results <a class="direct-link" href="#qualifying-results"> </a></h1>
<pre><code>{
  viewer {
    repositories(first: 2, orderBy: {field: CREATED_AT, direction: DESC}) {
      totalCount
      nodes {
        name
        description
        id
      }
    }
  }
}
</code></pre>
<blockquote>
<blockquote></blockquote>
</blockquote>
<p>There are a number of ways to qualify your results, so for example here, I'm asking for only the first two items ordered by the created date in descending order.</p>
<hr>
<h1 id="edges">Edges <a class="direct-link" href="#edges"> </a></h1>
<pre><code>{
  viewer {
    repositories(first: 2, orderBy: {field: CREATED_AT, direction: DESC}) {
      totalCount
      edges {
        node {
          name
          description
          id
        }
      }
    }
  }
}
</code></pre>
<p>Paginating is done with a field called edges. You wrap the nodes with an edges request and then change the name of nodes to node.</p>
<hr>
<h1 id="cursors">Cursors <a class="direct-link" href="#cursors"> </a></h1>
<pre><code>{
  viewer {
    repositories(first: 2, after: &quot;Y3Vyc29yOnYyOpK5MjAyMC0xMi0zMVQyMDoxMDoyNi0wODowMM4TbQ-E&quot;, orderBy: {field: CREATED_AT, direction: DESC}) {
      totalCount
      edges {
        node {
          name
          description
          id
        }
        cursor
      }
      pageInfo {
        hasPreviousPage
        startCursor
        endCursor
        hasNextPage
      }
    }
  }
}
</code></pre>
<blockquote>
<blockquote></blockquote>
</blockquote>
<p>Cursors are unique identifiers in each<br>
To paginate, you'll need to know some information about the current 'page'. To do that we can ask for the pageInfo field.</p>
<p>That will give you information about what wether there will be a page before or after this, as well as the beginning and ending cursors.</p>

        </main>
        <aside class="aside aside-supplemental col col-md-3 col-lg-2 d-none d-md-block">
          <nav class="sticky-top">
            <h3 class="pt-2">This Slide</h3>
            <div class="">
                <ol>
                    
                    <li><a href="#building-queries">Building Queries  </a>
            		</li>

                    <li><a href="#graphql-queries">GraphQL Queries  </a>
            		</li>

                    <li><a href="#graphql-requests">GraphQL Requests  </a>
            		</li>

                    <li><a href="#adding-other-fields">Adding other Fields  </a>
            		</li>

                    <li><a href="#nodes">Nodes  </a>
            		</li>

                    <li><a href="#qualifying-results">Qualifying Results  </a>
            		</li>

                    <li><a href="#edges">Edges  </a>
            		</li>

                    <li><a href="#cursors">Cursors  </a>
            		</li>
                </ol>
            </div>
          </nav>
        </aside>
      </div>
    </div>
  </div>
  <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.2.1/build/highlight.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha2/js/bootstrap.bundle.min.js" integrity="sha384-BOsAfwzjNJHrJ8cZidOg56tcQWfp6y72vEJ8xQ9w6Quywb24iOsW913URv1IS4GD" crossorigin="anonymous"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
</body>
</html>